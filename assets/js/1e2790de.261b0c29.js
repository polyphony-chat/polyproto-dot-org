"use strict";(self.webpackChunkpolyproto_dot_org=self.webpackChunkpolyproto_dot_org||[]).push([[5638],{2976:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"protocols/mls","title":"polyproto-mls Extension Specification","description":"Namespace: mls","source":"@site/docs/protocols/mls.md","sourceDirName":"protocols","slug":"/protocols/mls","permalink":"/docs/protocols/mls","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"polyproto-chat Extension Specification","permalink":"/docs/protocols/chat"},"next":{"title":"How and what to contribute","permalink":"/docs/contribute"}}');var s=t(4848),r=t(8453);const o={},c="polyproto-mls Extension Specification",d={},l=[{value:"1. Cryptographic Suites",id:"1-cryptographic-suites",level:2},{value:"1.1. MLS default cipher suite",id:"11-mls-default-cipher-suite",level:3},{value:"1.2. Hybrid PQC cipher suite",id:"12-hybrid-pqc-cipher-suite",level:3},{value:"2. Home Server Responsibilities",id:"2-home-server-responsibilities",level:2},{value:"3. HTTP APIs",id:"3-http-apis",level:2},{value:"4. WebSocket Gateway",id:"4-websocket-gateway",level:2},{value:"4.1. Gateway Event Opcodes",id:"41-gateway-event-opcodes",level:3}];function a(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"polyproto-mls-extension-specification",children:"polyproto-mls Extension Specification"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Namespace:"})," ",(0,s.jsx)(n.code,{children:"mls"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Version:"})," ",(0,s.jsx)(n.code,{children:"v1.0-alpha.2"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Base Path:"})," ",(0,s.jsx)(n.code,{children:"/.p2/mls/v1/"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://semver.org/spec/v2.0.0.html",children:"Semantic versioning v2.0.0"})," is used to version this\nspecification."]}),"\n",(0,s.jsxs)(n.p,{children:["The polyproto-mls extension defines how Messaging Layer Security (herein after referred to as its\ncommonly used acronym, MLS) integrates with polyproto. The basis of this document is\n",(0,s.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc9420.html",children:"IETF RFC 9420"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"1-cryptographic-suites",children:"1. Cryptographic Suites"}),"\n",(0,s.jsx)(n.p,{children:"This section lists pre-defined cryptographic suites that can be implemented by polyproto-mls\ncompatible implementations."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Name"}),(0,s.jsx)(n.th,{children:"Numeric Identifier (MLS Numeric Value)"}),(0,s.jsx)(n.th,{children:"Quantum-Secure?"}),(0,s.jsx)(n.th,{children:"Recommended?"}),(0,s.jsx)(n.th,{children:"Required?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"MLS default"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"0x0001"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Hybrid PQS"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"0xF110"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"11-mls-default-cipher-suite",children:"1.1. MLS default cipher suite"}),"\n",(0,s.jsxs)(n.p,{children:["In coherence with section #6.5 of the core polyproto specification document and section #17.1 of RFC\n9420, the cipher suite ",(0,s.jsx)(n.code,{children:"MLS_128_DHKEMX25519_AES128GCM_SHA256_Ed25519"})," must be implemented by\npolyproto-mls implementations. This cipher suite uses Curve25519 for key exchange,\n",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Galois/Counter_Mode",children:"AES-128-GCM"})," for\n",(0,s.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc9180.html",children:"HPKE"}),",\n",(0,s.jsx)(n.a,{href:"https://blindterran.github.io/ComputerScienceWiki/Cyber-Security/Network-Security/HMAC-Key-Derivation-Function-(HKDF)",children:"HKDF"}),"\nover SHA2-256, and Ed25519 for signatures."]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"MLS Cipher Suite Component"}),(0,s.jsx)(n.th,{children:"Component"}),(0,s.jsx)(n.th,{children:"Quantum-Secure?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Key Exchange"}),(0,s.jsx)(n.td,{children:"Curve25519"}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HPKE"}),(0,s.jsx)(n.td,{children:"AES-128-GCM"}),(0,s.jsx)(n.td,{children:"Partially"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HKDF"}),(0,s.jsx)(n.td,{children:"SHA2-256"}),(0,s.jsx)(n.td,{children:"Partially"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Signatures"}),(0,s.jsx)(n.td,{children:"Ed25519"}),(0,s.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"12-hybrid-pqc-cipher-suite",children:"1.2. Hybrid PQC cipher suite"}),"\n",(0,s.jsxs)(n.p,{children:["polyproto-mls v1 offers a\n",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Post-quantum_cryptography",children:"Post-Quantum cryptography (PQC)"})," cipher\nsuite in order to resist possible cryptanalytic attacks by a quantum computer on encrypted messages\nshared via polyproto-mls."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The MLS working group is considering adoption of the draft document\n",(0,s.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/draft-mahy-mls-pq",children:"ML-KEM and Hybrid Cipher Suites for MLS"}),".\nUntil official recommendations are made regarding eligible, well-suited cipher suites for hybrid,\nPost-Quantum/Traditional authenticity and confidentiality guarantees, polyproto-mls may either\nemploy a temporary, own cipher suite, or leave this particular section unfinished."]})}),"\n",(0,s.jsx)(n.h2,{id:"2-home-server-responsibilities",children:"2. Home Server Responsibilities"}),"\n",(0,s.jsx)(n.p,{children:"Services aiming to be compliant with polyproto-mls v1 must take on the roles of Authentication\nService (AS) and Delivery Service (DS) in the context of Messaging Layer Security."}),"\n",(0,s.jsxs)(n.admonition,{title:"Quote from the MLS Architecture Document:",type:"note",children:[(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["An Authentication Service (AS), which is responsible for attesting to bindings between\napplication-meaningful identifiers and the public key material used for authentication in the MLS\nprotocol. The AS must also be able to generate credentials that encode these bindings and validate\ncredentials provided by MLS clients.",(0,s.jsx)(n.br,{}),' A Delivery Service (DS), which can receive and\ndistribute messages between group members. In the case of group messaging, the DS may also be\nresponsible for acting as a "broadcaster" where the sender sends a single message which is then\nforwarded to each recipient in the group by the DS. The DS is also responsible for storing and\ndelivering initial public key material required by MLS clients in order to proceed with the group\nsecret key establishment that is part of the MLS protocol.']}),"\n"]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.a,{href:"https://messaginglayersecurity.rocks/mls-architecture/draft-ietf-mls-architecture.html#name-abstract-services",children:"Source"})})})]}),"\n",(0,s.jsx)(n.h2,{id:"3-http-apis",children:"3. HTTP APIs"}),"\n",(0,s.jsxs)(n.p,{children:["polyproto-mls provides a set of versioned HTTP APIs, accessible via the ",(0,s.jsx)(n.code,{children:"mls"})," namespace. The HTTP\nAPIs provide functionality required by the MLS specification for polyproto-mls implementers to also\nbe compliant MLS implementations."]}),"\n",(0,s.jsxs)(n.p,{children:["The HTTP APIs offered through polyproto-mls are fully documented as OpenAPI specification documents\nfor OpenAPI versions 3.0.0 and 3.1.0. The OpenAPI specification documents can be found\n",(0,s.jsx)(n.a,{href:"https://github.com/polyphony-chat/typespec-openapi/tree/main/build",children:"at this link"}),". Select the\npreferred OpenAPI version and find the versioned ",(0,s.jsx)(n.code,{children:".yaml"})," files in the corresponding folder."]}),"\n",(0,s.jsx)(n.h2,{id:"4-websocket-gateway",children:"4. WebSocket Gateway"}),"\n",(0,s.jsxs)(n.p,{children:["The polyproto-mls extension specification also registers a namespace ",(0,s.jsx)(n.code,{children:"mls"})," for the WebSocket\nprotocol defined in section #3 of the polyproto-core specification. As usual for WebSockets, this\nprovides optional, real-time bidirectional communication functionality for implementations that\nrequire it."]}),"\n",(0,s.jsxs)(n.p,{children:["Servers ",(0,s.jsx)(n.strong,{children:"must"})," offer the ",(0,s.jsx)(n.code,{children:"mls"})," namespace for the WebSocket Gateway and the functionality described\nby this chapter. Clients may subscribe to the ",(0,s.jsx)(n.code,{children:"mls"})," WebSocket Gateway Service Channel by sending a\nsubscribe event with the appropriate contents to the polyproto-mls WebSocket Gateway server."]}),"\n",(0,s.jsx)(n.admonition,{title:"Example MLS subscribe payload",type:"tip",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "n": "core",\n    "op": 8,\n    "d": {\n        "action": "subscribe",\n        "service": "mls"\n    }\n}\n'})})}),"\n",(0,s.jsx)(n.h3,{id:"41-gateway-event-opcodes",children:"4.1. Gateway Event Opcodes"}),"\n",(0,s.jsxs)(n.p,{children:["The following opcodes are defined by the ",(0,s.jsx)(n.code,{children:"mls"})," namespace:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Opcode"}),(0,s.jsx)(n.th,{children:"Name"}),(0,s.jsx)(n.th,{children:"Action"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"TBD"})}),(0,s.jsx)(n.td,{children:"TBD"}),(0,s.jsx)(n.td,{children:"TBD"}),(0,s.jsx)(n.td,{children:"TBD"})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);